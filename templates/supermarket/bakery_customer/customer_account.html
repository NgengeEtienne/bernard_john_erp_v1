{% extends '../../base2.html' %}
{% block title %} Customers {% endblock title %}


{% block content %}

<div class="content-overlay"></div>
<div class="content-wrapper">
    <div class="content-body">


<section class="row all-contacts">
    <div class="col-12">
        <div class="card" style="height: 45px;"> <!-- Set a specific height -->
            <div class="card-head">
                <div class="card-header">
                    <h4 class="card-title">{{customer.customer_name}}'s Account</h4>
                    <div class="heading-elements mt-0 button-margin"> <!-- Added class here -->
                        <a href="{% url 'supermarket:customer' %}">
                            <button class="btn btn-primary btn-md" style="padding: 5px 10px;" data-toggle="modal" data-target="">
                                <i class="d-md-none d-block ft-plus white"></i>
                                <span class="d-md-block d-none"><i class="la la-home"></i> Customer List </span>
                            </button>
                        </a>

                        <a href="{% url 'supermarket:customer-edit' customer.slug %}">
                            <button class="btn btn-primary btn-md" style="padding: 5px 10px;" data-toggle="modal" data-target="">
                                <i class="d-md-none d-block ft-plus white"></i>
                                <span class="d-md-block d-none"><i class="la la-pencil"></i> Edit Customer Profile </span>
                            </button>
                        </a>
                        
                        <!-- Edit Contact -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


      <section id="patient-profile">
          <div class="row match-height">
              <div class="col-lg-6 col-md-12">
                  <div class="card">
                      <div class="card-body">
                          <div class="row">
                              <div class="col-lg-4 col-md-4 d-flex justify-content-around">
                                  <div class="patient-img-name text-center">

                                      {% if customer.account_photo %}
                                          <img src="{{ customer.account_photo.url }}" alt="" class="card-img-top mb-1 patient-img img-fluid rounded-circle">
                                      {% else %}
                                          <img src="/static/app-assets/images/portrait/small/avatar-s-19.png" alt="" class="card-img-top mb-1 patient-img img-fluid rounded-circle">
                                      {% endif %}
                                      <h4>{{customer.customer_name}}</h4>
                                      <h6>{{customer_type}}</h6>
                                  </div>
                              </div>
                              <div class="col-lg-8 col-md-8 d-flex justify-content-around">
                                  <div class="patient-info">
                                      <ul class="list-unstyled">
                                          <li>
                                              <div class="patient-info-heading"><h6 class="text-dark">Account Name: <strong>{{customer.customer_name}} </strong></h6>                                           </li>
                                          <li>
                                            <div class="patient-info-heading">
                                                <h6 class="text-dark">Business Type: <strong>{{ customer.customer_type }}</strong></h6>
                                            </div>
                                          </li>
                                          <li>
                                              <div class="patient-info-heading"><h6 class="text-dark">Company: <strong>{{customer.company_name}}</strong></h6></div>
                                          </li>
                                          <li>
                                            <div class="patient-info-heading"><h6 class="text-dark">Area: <strong>{{customer.area}}</strong></h6></div>
                                        </li>
                                        <li>
                                            <div class="patient-info-heading"><h6 class="text-dark">Quarter: <strong>{{customer.quarter}}</strong></h6></div>
                                        </li>
                                        <li>
                                            <div class="patient-info-heading"><h6 class="text-dark">Address: <strong>{{customer.address}}</strong></h6></div>
                                        </li>

                                      </ul>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>

              <div class="col-lg-6 col-md-4">
                  <div class="card bg-gradient-y-warning">
                      <div class="card-header">
                          <h5 class="card-title text-white">Account Information</h5>
                          <hr>
                      </div>
                      <div class="card-content mx-1 mb-4">
                          <ul class="list-unstyled text-white">
                              <li> <h5 class="card-title text-white">Opening Balance : {{opening_balance}} </h5></li>
                              <hr>
                              <li> <h5 class="card-title text-white">Total Order :{{invoice.net_amount}} </h5></li>
                              <hr>
                              <li> <h5 class="card-title text-black">Total Discount : {{discount_total}} </h5></li>
                              <hr>
                              <li> <h5 class="card-title text-black">Total Return : {{returns_total}} </h5></li>
                              <hr>
                              <li> <h5 class="card-title text-black">Total Payments : {{payment_total}} </h5></li>
                              <hr >
                              <li> <h5>Account Balance : {{account_balance}} </h5></li>
                              <hr>
                              <p class="card-title text-black">Commission Earned: {{total_commission_earned}} </p>
                          </ul>
                      </div>
                  </div>
              </div>
          </div>


      </section>


        <!-- Zero configuration table -->
        <section id="configuration">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Customer Orders</h4>
                            <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                    <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                                    <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                                    <li><a data-action="close"><i class="ft-x"></i></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-content collapse show">
                            <div class="card-body card-dashboard">
                                <p class="card-text"></p>
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered zero-configuration">
                                        <thead>
                                            <tr>
                                                <th>Order Date</th>
                                                <th>Invoice Id</th>
                                                <th>Customer Name</th>
                                                <th>Total</th>
                                                <th>Due Date</th>
                                                <th>Status</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                          {% for order in invoice %}

                                            <tr>
                                                <td><i class="la la-calendar-check-o"></i>{{order.created}}</td>
                                                <td> <a href="{% url 'invoice:view_invoice_detail' order.id %}">{{order.invoice_id}}</a> </td>
                                                <td>{{order.customer}}</td>
                                                <td>{{order.total_amount}}</td>
                                                <td>{{order.due_date}}</td>
                                                <td></td>
                                                <td>
                                                  <a href="{% url 'invoice:view_invoice_detail' order.id %}"><i class="ft-eye text-success"></i></a>
                                                  <a href="  "><i class="ft-edit text-success"></i></a>
                                                  <a href=""><i class="ft-trash-2 ml-1 text-danger"></i></a>
                                                </td>
                                            </tr>

                                          {% endfor %}


                                        </tbody>
                                        <tfoot>
                                            <tr>
                                              <th>Order Date</th>
                                              <th>Invoice Id</th>
                                              <th>Customer Name</th>
                                              <th>Total</th>
                                              <th>Due Date</th>
                                              <th><h5>{{get_total_amount}}cfa</h5></th>
                                              <th>Actions</th>

                                              <th></th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>



        <!-- Zero configuration table -->
        <section id="configuration">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Bakery Payments</h4>
                            <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                    <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                                    <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                                    <li><a data-action="close"><i class="ft-x"></i></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-content collapse show">
                            <div class="card-body card-dashboard">
                                <p class="card-text"></p>
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered zero-configuration">
                                        <thead>
                                            <tr>
                                                <th>Payment Date</th>
                                                <th>Invoice Id</th>
                                                <th>Employee</th>
                                                <th>Installment</th>
                                                <th>Payment Id</th>
                                                <th>Amount</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                          {% for payment in payments %}

                                            <tr>
                                                <td><i class="la la-calendar-check-o"></i>{{payment.date}}</td>
                                                <td>{{payment.invoice}}</td>
                                                <td>{{payment.employee}}</td>
                                                <td>{{payment.payment_installment}}</td>
                                                <td>{{payment.payment_id}}</td>
                                                <td>{{payment.amount_paid}}</td>
                                                <td>
                                                  <a href=""><i class="ft-edit text-success"></i></a>
                                                  <a href=""><i class="ft-trash-2 ml-1 text-danger"></i></a>
                                                </td>
                                            </tr>

                                          {% endfor %}


                                        </tbody>
                                        <tfoot>
                                            <tr>
                                              <th>Date</th>
                                              <th>Invoice Id</th>
                                              <th>Employee</th>
                                              <th>Customer Name</th>
                                              <th><h4>Total</h4></th>
                                              <th><h5 class="text-bold-800 font-weight-bold secondary">{{payment_total}}cfa</h5></th>
                                              <th>Actions</th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--/ Zero configuration table -->


        <!-- Zero configuration table -->
        <section id="configuration">
            <div class="row">
                <div class="col-12">
                    <div class="card">
                        <div class="card-header">
                            <h4 class="card-title">Returns</h4>
                            <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                            <div class="heading-elements">
                                <ul class="list-inline mb-0">
                                    <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                    <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                                    <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                                    <li><a data-action="close"><i class="ft-x"></i></a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="card-content collapse show">
                            <div class="card-body card-dashboard">
                                <p class="card-text"></p>
                                <div class="table-responsive">
                                    <table class="table table-striped table-bordered zero-configuration">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Session</th>
                                                <th>Customer Name</th>
                                                <th>Transaction Status</th>
                                                <th>Amount</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>

                                          {% for return in returns %}

                                              <tr>
                                              <td><i class="la la-calendar-check-o"></i>{{return.created}}</td>
                                              <td>{{return.session_of_the_day}}</td>
                                              <td>{{return.customer}}</td>
                                              <td>{{return.transaction_status}}</td>
                                              <td>{{return.amount}}</td>
                                              <td>
                                              <a href=""><i class="ft-edit text-success"></i></a>
                                              <a href=""><i class="ft-trash-2 ml-1 text-danger"></i></a>
                                              </td>
                                              </tr>

                                        {% endfor %}


                                        </tbody>
                                        <tfoot>
                                            <tr>
                                              <th>Date</th>
                                              <th>Session</th>
                                              <th>Customer Name</th>
                                              <th><h4>Total</h4></th>
                                              <th><h5>{{total_opening_returns}}cfa</h5></th>
                                              <th>Actions</th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!--/ Zero configuration table -->




    </div>
</div>
</div>

{% endblock content %}
{% extends 'base2.html' %}
{% block title %} Suppliers Invoices {% endblock title %}


{% block content %}

<!-- BEGIN: Content-->
<div class="app-content content">
    <div class="content-header row">
        <div class="content-header-light col-12">
            <div class="row">
                <div class="content-header-left col-md-9 col-12 mb-2">
                    <h3 class="content-header-title">Supplier  details</h3>
                    {% comment %} <div class="row breadcrumbs-top">
                        <div class="breadcrumb-wrapper col-12">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="index.html">Home</a>
                                </li>
                                <li class="breadcrumb-item"><a href="#">DataTables</a>
                                </li>
                                <li class="breadcrumb-item active">Basic DataTables
                                </li>
                            </ol>
                        </div>
                    </div> {% endcomment %}
                </div>
                <!-- <div class="content-header-right col-md-3 col-12">
                    <div class="btn-group float-md-right" role="group" aria-label="Button group with nested dropdown">
                        <button class="btn btn-primary round dropdown-toggle dropdown-menu-right box-shadow-2 px-2 mb-1" id="btnGroupDrop1" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Action</button>
                        <div class="dropdown-menu">
                          <a class="dropdown-item" href="{% url 'customer:customer' %}">supplier List</a>
                          <a class="dropdown-item" href="{% url 'customer:customer' %}">Sales</a>
                          <a class="dropdown-item" href="material-component-cards.html">Payments</a>
                          <a class="dropdown-item" href="component-progress.html">Damges</a>
                          <a class="dropdown-item" href="component-progress.html">Returns</a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item" href="register-with-bg-image.html"> Register</a>
                        </div>
                    </div>
                </div> -->
            </div>
        </div>
    </div>
    <div class="content-overlay"></div>
    <div class="content-wrapper">
        <div class="content-body">


          <section id="patient-profile">
              <div class="row match-height">
                  <div class="col-lg-6 col-md-12">
                      <div class="card">
                          <div class="card-body">
                              <div class="row">
                                  <div class="col-lg-4 col-md-4 d-flex justify-content-around">
                                      <div class="patient-img-name text-center">

                                          {% if supplier.account_photo %}
                                              <img src="{{ customer.account_photo.url }}" alt="" class="card-img-top mb-1 patient-img img-fluid rounded-circle">
                                          {% else %}
                                              <img src="" alt="" class="card-img-top mb-1 patient-img img-fluid rounded-circle">
                                          {% endif %}
                                          <h4>{{supplier.supplier_name}}</h4>
                                          <h6>{{supplier.supplier_type}}</h6>
                                      </div>
                                  </div> 
                                  <div class="col-lg-8 col-md-8 d-flex justify-content-around">
                                      <div class="patient-info">
                                          <ul class="list-unstyled">
                                              <li>
                                                  <div class="patient-info-heading"><h6 class="text-dark">Account Name: </h6> </div> <h5 class="font-weight-bold">{{supplier.supplier_name}}</h5>
                                              </li>
                                              <li>
                                                  <div class="patient-info-heading"><h6 class="text-dark">Email: </h6> </div> <h5 class="font-weight-bold">{{supplier.email}}</h5>
                                              </li>
                                              <li>
                                                  <div class="patient-info-heading"><h6 class="text-dark">Contact: </h6></div> <h5 class="font-weight-bold">{{supplier.phone1}}</h5>
                                              </li>
                                              <li>
                                                  <div class="patient-info-heading"><h6 class="text-dark">Address: </h6></div> <h5 class="font-weight-bold">{{supplier.address}}</h5>
                                              </li>
                                          </ul>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>

                  <div class="col-lg-6 col-md-4">
                      <div class="card bg-gradient-y-warning">
                          <div class="card-header">
                              <h5 class="card-title text-white">Account Information</h5>
                              <hr>
                          </div>
                          <div class="card-content mx-1 mb-4">
                              <ul class="list-unstyled text-white">
                                  <!-- <li> <h5 class="card-title text-white">Opening Balance : {{opening_balance}} XAF</h5></li> -->
                                  <hr>
                                  <li> <h5 class="card-title text-white">Total Order :{{supplier_invoice_total}} XAF</h5></li>
                                  <hr>
                                  <!-- <li> <h5 class="card-title text-black">Total Return : {{returns_total| floatformat:0}} XAF</h5></li> -->
                                  <hr>
                                  <li> <h5 class="card-title text-black">Total Return : {{total_purchase_payment}} XAF</h5></li>
                                  <hr >
                                  <li> <h5>Account Balance : {{account_balance}} </h5></li>
                                  <hr>
                                  <p class="card-title text-black">Commission Earned: {{total_commission_earned}} </p>
                              </ul>
                          </div>
                      </div>
                  </div>
              </div>


          </section>


            <!-- Zero configuration table -->
            <section id="configuration">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Customer Orders</h4>
                                <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                <div class="heading-elements">
                                    <ul class="list-inline mb-0">
                                        <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                        <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                                        <li><a data-action="close"><i class="ft-x"></i></a></li>
                                    </ul>
                                </div>
                            </div>

                            <div class="card-header">
                                <h4 class="card-title float-left">
                                </h4>

                                <form method="GET" action="">
                                  <div class="form-row \">
                                      <div class="form-group col-md-3 col-lg-3" data-provide="datepicker">
                                        <label for="inputPassword4">Start Date</label>
                                        <input type="date" class="form-control" id="#publishDateMin" name="start_date">
                                      </div>
                                      <div class="form-group col-md-3 col-lg-3" data-provide="datepicker">
                                        <label for="inputPassword4">End Date</label>
                                        <input type="date" class="form-control" id="#publishDateMax" name="end_date">
                                      </div>
                                  </div>
                                  <button type="submit" class="btn btn-primary"><i class="fas fa-search"></i> Search</button>
                              </form>
                            </div>

                            <div class="card-body">
                                <div class="bug-list-search">
                                    <div class="bug-list-search-content">
                                        <div class="sidebar-toggle d-block d-lg-none"><i class="ft-menu font-large-1"></i></div>
                                        <form action="#">
                                            <div class="position-relative">
                                                <input type="search" id="search-contacts" class="form-control" placeholder="Search contacts...">
                                                <div class="form-control-position">
                                                    <i class="la la-search text-size-base text-muted la-rotate-270"></i>
                                                </div>
                                                <button type="submit" class="btn btn-primary mt-1"><i class="fas fa-search"></i> Search</button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>

                            <div class="card-content collapse show">
                                <div class="card-body card-dashboard">
                                    <p class="card-text">Purchases</p>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered zero-configuration">
                                            <thead>
                                                <tr>
                                                    <th>Order Date</th>
                                                    <th>Invoice Id</th>
                                                    <th>Employee</th>
                                                    <th>Total</th>
                                                    <!-- <th>Total Paid</th> -->
                                                    <!-- <th>Balance</th> -->
                                                    <th>Due Date</th>
                                                    <th>Status</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                              {% for order in supplier_invoice %}

                                                <tr>
                                                    <td><i class="la la-calendar-check-o"></i>{{order.created}}</td>
                                                    <td> <a href="{% url 'bar:purchase_detail' order.pk %}">{{order.purchase_id}}</a> </td>
                                                    <td>{{order.employee}}</td>
                                                    <td>{{order.net_amount|floatformat:0}} cfa</td>
                                                    <!-- <td>{{order.total_amount_paid}}</td>
                                                    <td>{{order.balance_due|floatformat:0}}</td> -->
                                                    <td>{{order.due_date}}</td>
                                                    <td>
                                                      {% if order.total_amount_paid == 0 %}
                                                        <a class="media-heading name danger font-weight-bold">No Payment</a>
                                                      {% elif order.total_amount_paid < order.get_grand_total %}
                                                          <a class="media-heading name danger font-weight-bold">Partially Paid</a>
                                                      {% elif order.total_amount_paid == order.get_grand_total %}
                                                          <a class="media-heading name success font-weight-bold">Fully Paid</a>
                                                      {% else %}
                                                          <a class="media-heading name info font-weight-bold">Over Paid</a>
                                                      {% endif %}

                                                    </td>
                                                    <td>
                                                      <a href="{% url 'bar:purchase_detail' order.id %}"><i class="ft-eye text-success"></i></a>
                                                      <a href="{% url 'bar:edit-purchase' order.id %}"><i class="ft-edit text-success"></i></a>
                                                      <a href=""><i class="ft-trash-2 ml-1 text-danger"></i></a>
                                                    </td>
                                                </tr>

                                              {% endfor %}


                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                  <th>Order Date</th>
                                                  <th>Invoice Id</th>
                                                  <th>Employee</th>
                                                  <th>Total</th>
                                                  <!-- <th>Total Paid</th> -->
                                                  <!-- <th>Balance</th> -->
                                                  <th>Due Date</th>
                                                  <th>Status</th>
                                                  <th>Actions</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>



            <!-- Zero configuration table -->
            <section id="configuration">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Returns </h4>
                                <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                <div class="heading-elements">
                                    <ul class="list-inline mb-0">
                                        <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                        <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                                        <li><a data-action="close"><i class="ft-x"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-content collapse show">
                                <div class="card-body card-dashboard">
                                    <p class="card-text"></p>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered zero-configuration">
                                            <thead>
                                                <tr>
                                                    <th>Order Date</th>
                                                    <th>Invoice Id</th>
                                                    <th>Employee</th>
                                                    <th>Total</th>
                                                    <!-- <th>Total Paid</th> -->
                                                    <!-- <th>Balance</th> -->
                                                    <th>Due Date</th>
                                                    <th>Status</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                              {% for order in purchase_returns %}

                                                <tr>
                                                    <td><i class="la la-calendar-check-o"></i>{{order.created}}</td>
                                                    <td> <a href="{% url 'bar:purchase_detail' order.pk %}">{{order.purchase_id}}</a> </td>
                                                    <td>{{order.employee}}</td>
                                                    <td>{{order.net_amount|floatformat:0}} cfa</td>
                                                    <!-- <td>{{order.total_amount_paid}}</td>
                                                    <td>{{order.balance_due|floatformat:0}}</td> -->
                                                    <td>{{order.due_date}}</td>
                                                    <td>
                                                      {% if order.total_amount_paid == 0 %}
                                                        <a class="media-heading name danger font-weight-bold">No Payment</a>
                                                      {% elif order.total_amount_paid < order.get_grand_total %}
                                                          <a class="media-heading name danger font-weight-bold">Partially Paid</a>
                                                      {% elif order.total_amount_paid == order.get_grand_total %}
                                                          <a class="media-heading name success font-weight-bold">Fully Paid</a>
                                                      {% else %}
                                                          <a class="media-heading name info font-weight-bold">Over Paid</a>
                                                      {% endif %}

                                                    </td>
                                                    <td>
                                                      <a href="{% url 'bar:purchase_detail' order.id %}"><i class="ft-eye text-success"></i></a>
                                                      <a href="{% url 'bar:edit-purchase' order.id %}"><i class="ft-edit text-success"></i></a>
                                                      <a href=""><i class="ft-trash-2 ml-1 text-danger"></i></a>
                                                    </td>
                                                </tr>

                                              {% endfor %}


                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                  <th>Order Date</th>
                                                  <th>Invoice Id</th>
                                                  <th>Employee</th>
                                                  <th>Total</th>
                                                  <!-- <th>Total Paid</th> -->
                                                  <!-- <th>Balance</th> -->
                                                  <th>Due Date</th>
                                                  <th>Status</th>
                                                  <th>Actions</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!--/ Zero configuration table -->


            <!-- Zero configuration table -->
            <!-- <section id="configuration">
                <div class="row">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                <h4 class="card-title">Returns</h4>
                                <a class="heading-elements-toggle"><i class="la la-ellipsis-v font-medium-3"></i></a>
                                <div class="heading-elements">
                                    <ul class="list-inline mb-0">
                                        <li><a data-action="collapse"><i class="ft-minus"></i></a></li>
                                        <li><a data-action="reload"><i class="ft-rotate-cw"></i></a></li>
                                        <li><a data-action="expand"><i class="ft-maximize"></i></a></li>
                                        <li><a data-action="close"><i class="ft-x"></i></a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-content collapse show">
                                <div class="card-body card-dashboard">
                                    <p class="card-text"></p>
                                    <div class="table-responsive">
                                        <table class="table table-striped table-bordered zero-configuration">
                                            <thead>
                                                <tr>
                                                    <th>Date</th>
                                                    <th>Session</th>
                                                    <th>Customer Name</th>
                                                    <th>Transaction Status</th>
                                                    <th>Amount</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>

                                              {% for return in returns %}

                                                  <tr>
                                                  <td><i class="la la-calendar-check-o"></i>{{return.created}}</td>
                                                  <td>{{return.session_of_the_day}}</td>
                                                  <td>{{return.customer}}</td>
                                                  <td>{{return.transaction_status}}</td>
                                                  <td>{{return.amount}}</td>
                                                  <td>
                                                  <a href=""><i class="ft-edit text-success"></i></a>
                                                  <a href=""><i class="ft-trash-2 ml-1 text-danger"></i></a>
                                                  </td>
                                                  </tr>

                                            {% endfor %}


                                            </tbody>
                                            <tfoot>
                                                <tr>
                                                  <th>Date</th>
                                                  <th>Session</th>
                                                  <th>Customer Name</th>
                                                  <th><h4>Total</h4></th>
                                                  <th><h5>{{total_opening_returns}}cfa</h5></th>
                                                  <th>Actions</th>
                                                </tr>
                                            </tfoot>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section> -->
            <!--/ Zero configuration table -->




        </div>
    </div>
</div>
<!-- END: Content-->
<!-- END: Content-->

{% endblock content %}
